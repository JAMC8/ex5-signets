(this["webpackJsonpex5-signets"]=this["webpackJsonpex5-signets"]||[]).push([[0],{159:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},181:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),s=(n(159),n(21)),o=n.n(s),u=n(32),l=n(25),d=n(30),j=n(17),b=(n(161),n(162),n(342)),p=n(327),f=n(9),h=n(133),m=(n(290),n(103),{apiKey:"AIzaSyCq8AIp4VBWtww6QRA2uaU2q_zcZ8CYlHY",authDomain:"panier-achats.firebaseapp.com",databaseURL:"https://panier-achats-default-rtdb.firebaseio.com",projectId:"panier-achats",storageBucket:"panier-achats.appspot.com",messagingSenderId:"786866074949",appId:"1:786866074949:web:13f102114ad3459400ba2c"}),O="utilisateurs-ex5",x="dossiers";f.a.apps.length||f.a.initializeApp(m);var v=f.a.auth(),g=new h.a.AuthUI(v),N=f.a.firestore();n(171);function y(e){v.onAuthStateChanged((function(t){var n,a,r;e(t),t&&(n=t.uid,a=t.displayName,r=t.email,N.collection(O).doc(n).set({nom:a,courriel:r,datecompte:f.a.firestore.FieldValue.serverTimestamp()},{merge:!0}))}))}var w=n(7);function k(e){var t=e.utilisateur;return Object(w.jsxs)("header",{className:"Entete",children:[Object(w.jsxs)("div",{className:"logo",children:["Signets",Object(w.jsx)(p.a,{variant:"outlined",size:"small",className:"btn-deconnexion",onClick:function(){v.signOut()},children:"D\xe9connexion"})]}),Object(w.jsxs)("div",{className:"utilisateur",children:[t.displayName," ",Object(w.jsx)(b.a,{className:"avatar",alt:t.displayName,src:t.photoURL})]})]})}n(177),n(178);var A=n(331),C=n(144),D=n(340),S=n(136),I=n.n(S),F=n(137),B=n.n(F),E=n.p+"static/media/couverture.2dc9ece9.webp";function R(e){var t=e.id,n=e.nom,r=e.couleur,c=e.datemodif,i=e.couverture,s=e.gererSupprimer,o=Object(a.useState)(null),u=Object(j.a)(o,2),l=u[0],d=u[1];function b(){d(null)}return Object(w.jsxs)("article",{className:"Dossier",style:{backgroundColor:r},children:[Object(w.jsxs)("div",{className:"couverture",children:[Object(w.jsx)(A.a,{className:"deplacer","aria-label":"d\xe9placer",disableRipple:!0,children:Object(w.jsx)(I.a,{})}),Object(w.jsx)("img",{src:i||E,alt:n})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("h2",{children:n}),Object(w.jsxs)("p",{children:["Modifi\xe9 : ",_(c)]})]}),Object(w.jsx)(A.a,{id:t,className:"modifier","aria-label":"modifier",size:"small","aria-haspopup":"true","aria-controls":"maj-dossier",onClick:function(e){d(e.currentTarget)},children:Object(w.jsx)(B.a,{})}),Object(w.jsxs)(C.a,{id:"maj-dossier",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:b,children:[Object(w.jsx)(D.a,{onClick:b,children:"Modifier"}),Object(w.jsx)(D.a,{onClick:function(){s(t),b()},children:"Supprimer"})]})]})}function _(e){var t=e?new Date(1e3*e.seconds):new Date;return"".concat(t.getDate()," ").concat(["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"][t.getMonth()]," ").concat(t.getFullYear())}function V(){return(V=Object(d.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.datemodif=f.a.firestore.FieldValue.serverTimestamp(),e.next=3,N.collection(O).doc(t).collection(x).add(n);case 3:return a=e.sent,e.abrupt("return",a.get());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,N.collection(O).doc(t).collection(x).orderBy("datemodif","desc").get();case 3:return e.sent.forEach((function(e){n.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.collection(O).doc(t).collection(x).doc(n).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,n){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,N.collection(O).doc(t).collection(x).orderBy(n,a).get();case 3:return e.sent.forEach((function(e){r.push(Object(u.a)({id:e.id},e.data()))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){var t=e.utilisateur,n=e.etatDossiers,r=Object(j.a)(n,2),c=r[0],i=r[1];function s(e){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(t.uid,n).then((function(){var e=Object(l.a)(c).filter((function(e){return e.id!==n}));i(e)})).catch((function(e){return console.log("\xc9chec de la suppression - Firestore a r\xe9pondu :",e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){(function(e){return z.apply(this,arguments)})(t.uid).then((function(e){return i(e)}))}),[]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("ul",{className:"ListeDossiers",children:c.length>0?c.map((function(e){return Object(w.jsx)("li",{children:Object(w.jsx)(R,Object(u.a)(Object(u.a)({},e),{},{gererSupprimer:s}))},e.id)})):Object(w.jsxs)("li",{className:"msgAucunDossier",children:["Votre liste de dossiers est vide",Object(w.jsx)("p",{children:";-("})]})})})}var q=n(336),L=n(142),Y=n.n(L);n(181);function G(){return Object(a.useEffect)((function(){return e="#firebaseui-widget",void g.start(e,{signInOptions:[f.a.auth.GoogleAuthProvider.PROVIDER_ID,f.a.auth.FacebookAuthProvider.PROVIDER_ID,f.a.auth.GithubAuthProvider.PROVIDER_ID],signInFlow:"popup"});var e}),[]),Object(w.jsxs)("div",{className:"Accueil",children:[Object(w.jsxs)("h3",{className:"logo",children:["Signets ",Object(w.jsx)("span",{children:"beta"})]}),Object(w.jsxs)("h2",{className:"amorce",children:["Organisez vos signets Web, ",Object(w.jsx)("br",{}),"Simple comme bonjour !"]}),Object(w.jsx)("h4",{className:"connexion-etiquette",children:"Connexion \xe0 Signets"}),Object(w.jsx)("div",{id:"firebaseui-widget"})]})}var J=n(337),H=n(339),K=n(334),Q=n(333),Z=n(341),X=n(143);function $(e){var t=e.ouvert,n=e.setOuvert,r=e.gererAjout,c=Object(a.useState)(""),i=Object(j.a)(c,2),s=i[0],o=i[1],u=Object(a.useState)(""),l=Object(j.a)(u,2),d=l[0],b=l[1],f=Object(a.useState)("#537169"),h=Object(j.a)(f,2),m=h[0],O=h[1];function x(){o(""),b(""),O("#537169")}return Object(w.jsx)("div",{className:"AjouterDossier",children:Object(w.jsxs)(H.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"form-dialog-title",children:[Object(w.jsx)(Z.a,{id:"form-dialog-title",children:"Ajouter un dossier"}),Object(w.jsxs)(Q.a,{children:[Object(w.jsx)(J.a,{autoFocus:!0,margin:"dense",id:"nomDossier",label:"Nom du dossier",type:"text",fullWidth:!0,onChange:function(e){return o(e.target.value)},defaultValue:s}),Object(w.jsx)(J.a,{margin:"normal",id:"urlImage",label:"Adresse de l'image de couverture",type:"text",fullWidth:!0,onChange:function(e){return b(e.target.value)},defaultValue:d}),Object(w.jsx)(X.a,{width:"100%",triangle:"hide",colors:["#537169","#55BBB2","#F6D2A3","#F3D379","#FB7778","#5990B8"],onChangeComplete:function(e,t){return O(e.hex)},color:m})]}),Object(w.jsxs)(K.a,{children:[Object(w.jsx)(p.a,{style:{backgroundColor:"#900",color:"#fff",margin:"15px 0"},onClick:function(){n(!1),x()},variant:"contained",children:"Annuler"}),Object(w.jsx)(p.a,{style:{backgroundColor:"#090",color:"#fff",margin:"15px"},className:"btnAjouter",onClick:function(){""!==s&&r(s,d,m),x()},variant:"contained",children:"Ajouter"})]})]})})}var ee=n(335);function te(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(j.a)(c,2),s=i[0],b=i[1],p=Object(a.useState)(!1),f=Object(j.a)(p,2),h=f[0],m=f[1],O=Object(a.useState)("date_modif_desc"),x=Object(j.a)(O,2),v=x[0],g=x[1];function N(){return(N=Object(d.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(n.uid,t,a).then((function(e){return b(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=Object(ee.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}))();return Object(a.useEffect)((function(){return y(r)}),[]),Object(w.jsx)("div",{className:"Appli",children:n?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(k,{utilisateur:n}),Object(w.jsxs)("section",{className:"contenu-principal",children:[Object(w.jsx)("form",{className:A.root,children:Object(w.jsx)(J.a,{id:"tri-des-dossiers",select:!0,label:"Tri des dossiers",value:v,onChange:function(e){g(e.target.value)},children:[{valeur:"date_modif_desc",texte:"Date de modification descendante",categorie:"datemodif",desc:"desc"},{valeur:"nom_asce",texte:"Nom de dossier ascendant",categorie:"nom",desc:"asc"},{valeur:"nom_desc",texte:"Nom de dossier descendante",categorie:"nom",desc:"desc"}].map((function(e){return Object(w.jsx)(D.a,{value:e.valeur,onClick:function(){!function(e,t){N.apply(this,arguments)}(e.categorie,e.desc)},children:e.texte},e.valeur)}))})}),Object(w.jsx)(W,{utilisateur:n,etatDossiers:c}),Object(w.jsx)($,{ouvert:h,setOuvert:m,gererAjout:function(e,t,a){var r={nom:e,couverture:t,couleur:a,signets:[]};(function(e,t){return V.apply(this,arguments)})(n.uid,r).then((function(e){return b([].concat(Object(l.a)(s),[Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})]))})),m(!1)}}),Object(w.jsx)(q.a,{onClick:function(){return m(!0)},className:"ajoutRessource",color:"primary","aria-label":"Ajouter dossier",children:Object(w.jsx)(Y.a,{})})]})]}):Object(w.jsx)(G,{})})}i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(te,{})}),document.getElementById("racine"))}},[[288,1,2]]]);